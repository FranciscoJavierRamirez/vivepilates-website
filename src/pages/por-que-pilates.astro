---
import BaseLayout from '../layouts/BaseLayout.astro';
import HeroSection from '../components/why-pilates/HeroSection.astro';
import OurTeam from '../components/why-pilates/OurTeam.astro';
import PrinciplesGrid from '../components/why-pilates/PrinciplesGrid.astro';
import BenefitsCategorized from '../components/why-pilates/BenefitsCategorized.astro';
import AudienceCards from '../components/why-pilates/AudienceCards.astro';
import TestimonialsSection from '../components/why-pilates/TestimonialsSection.astro';
import CTASection from '../components/why-pilates/CTASection.astro';
import { getEntry } from 'astro:content';

const title = '¿Por qué Pilates? - VivePilates';
const description =
  'Descubre los beneficios del Pilates para tu cuerpo, mente y salud. Conoce los principios fundamentales, testimonios reales y cómo se adapta a todas las edades en Vitacura.';
const currentPage = 'por-que-pilates';

// Cargar datos desde archivos de contenido
let benefits: any[] = [];

try {
  const benefitsEntry = await getEntry('why-pilates', 'benefits');
  if (benefitsEntry?.data.benefits) {
    benefits = benefitsEntry.data.benefits;
  }
} catch (error) {
  console.warn('No se pudo cargar benefits.mdx:', error);
}
---

<BaseLayout title={title} description={description} currentPage={currentPage}>
  <HeroSection />

  <!-- Componentes principales -->
  <div id="principios">
    <PrinciplesGrid />
  </div>

  <BenefitsCategorized benefits={benefits} />

  <AudienceCards />

  <TestimonialsSection />

  <OurTeam />

  <CTASection />
</BaseLayout>

<!-- FAQ Schema para SEO -->
<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "¿Cuáles son los principios fundamentales del Pilates?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Los 6 principios del Pilates son: Respiración (base del movimiento), Concentración (mente-cuerpo conectados), Centralización (core como centro), Control (movimiento consciente), Precisión (calidad sobre cantidad) y Fluidez (movimiento continuo)."
        }
      },
      {
        "@type": "Question",
        "name": "¿Qué beneficios físicos ofrece el Pilates?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "El Pilates mejora la postura corporal, aumenta la flexibilidad muscular, fortalece piernas y espalda, activa el transverso abdominal, fortalece el CORE, equilibra la musculatura del tronco y mejora el equilibrio y coordinación."
        }
      },
      {
        "@type": "Question",
        "name": "¿Quiénes pueden practicar Pilates?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "El Pilates es para todos: jóvenes y adultos, menores de 15-17 años con supervisión, embarazadas desde el 2do trimestre con certificado médico, personas en rehabilitación bajo supervisión médica, y adultos mayores con autorización médica."
        }
      },
      {
        "@type": "Question",
        "name": "¿Qué beneficios mentales tiene el Pilates?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "El Pilates mejora la calidad del sueño, aumenta la concentración y enfoque mental, reduce el estrés y promueve la relajación y bienestar general."
        }
      },
      {
        "@type": "Question",
        "name": "¿Cómo ayuda el Pilates con problemas médicos?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "El Pilates puede ayudar a disminuir algunos grados de escoliosis no estructural y mejorar problemas en la espalda y columna vertebral, siempre bajo supervisión profesional y con autorización médica."
        }
      }
    ]
  }
</script>

<!-- Schema para el negocio -->
<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "ExerciseGym",
    "@id": "https://vivepilates.cl",
    "name": "VivePilates",
    "description": "Estudio de Pilates en Vitacura especializado en el método original de Joseph Pilates",
    "url": "https://vivepilates.cl",
    "telephone": "+56 9 1234 5678",
    "email": "info@vivepilates.cl",
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "Av. Kennedy 6800",
      "addressLocality": "Vitacura",
      "addressRegion": "Región Metropolitana",
      "addressCountry": "CL"
    },
    "hasOfferCatalog": {
      "@type": "OfferCatalog",
      "name": "Servicios de Pilates",
      "itemListElement": [
        {
          "@type": "Offer",
          "itemOffered": {
            "@type": "Service",
            "name": "Clase de Pilates Grupal",
            "description": "Clases grupales máximo 6 personas con método original"
          }
        },
        {
          "@type": "Offer",
          "itemOffered": {
            "@type": "Service",
            "name": "Clase de Prueba Gratuita",
            "description": "Primera clase gratuita para nuevos alumnos"
          }
        }
      ]
    },
    "aggregateRating": {
      "@type": "AggregateRating",
      "ratingValue": "5.0",
      "reviewCount": "10"
    },
    "amenityFeature": [
      {
        "@type": "LocationFeatureSpecification",
        "name": "Máquinas Reformer",
        "value": true
      },
      {
        "@type": "LocationFeatureSpecification",
        "name": "Profesionales Certificados",
        "value": true
      },
      {
        "@type": "LocationFeatureSpecification",
        "name": "Clases Pequeñas",
        "value": "Máximo 6 personas"
      }
    ]
  }
</script>

<style>
  /* Scroll suave para navegación interna */
  html {
    scroll-behavior: smooth;
  }

  /* Mejoras de accesibilidad */
  @media (prefers-reduced-motion: reduce) {
    * {
      animation: none !important;
      transition: none !important;
    }
  }
</style>
