---
import { getEntry } from 'astro:content';

// Carga el contenido desde markdown
let facilities;
try {
  const entry = await getEntry('services', 'facilities');
  facilities = [
    {
      name: 'Recepci√≥n',
      description:
        '√Årea de espera de clase e hidrataci√≥n. Espacio c√≥modo para esperar tu clase y hidratarte antes o despu√©s del entrenamiento.',
      icon: 'lobby',
      available: true,
      details: 'Ambiente acogedor con vista panor√°mica',
    },
    {
      name: 'Sala Principal Acondicionada',
      description:
        'Sala equipada para la pr√°ctica de pilates con m√°quinas Reformer. Ambiente climatizado con vista a√©rea, equipada con m√°quinas de √∫ltima generaci√≥n.',
      icon: 'gym',
      available: true,
      details: 'M√°quinas Reformer profesionales',
    },
    {
      name: 'Sala Complementaria',
      description:
        'Espacio para sillas multifuncionales y barriles correctores. Sala adicional para ejercicios espec√≠ficos con equipamiento especializado.',
      icon: 'equipment',
      available: true,
      details: 'Sillas y barriles correctores',
    },
    {
      name: 'Ba√±o',
      description:
        'Instalaciones limpias y c√≥modas. Ba√±o equipado para el cambio y aseo personal.',
      icon: 'restroom',
      available: true,
      details: 'Instalaciones modernas y limpias',
    },
    {
      name: 'Bicicletero',
      description:
        'Estacionamiento gratuito para bicicletas en subterr√°neo -2. Acceso seguro, debes traer tu propio candado.',
      icon: 'bike',
      available: true,
      details: 'Gratuito - Trae tu candado',
    },
    {
      name: 'Estacionamiento',
      description:
        'Estacionamientos pagados disponibles en el edificio. Opci√≥n c√≥moda y segura, tambi√©n hay estacionamientos gratuitos en calles cercanas.',
      icon: 'parking',
      available: true,
      details: 'Pagado en edificio, gratuito en calles',
    },
    {
      name: 'Vista Panor√°mica',
      description:
        'Hermosa vista a√©rea de la ciudad desde nuestras salas. Ambiente inspirador que complementa tu experiencia de bienestar.',
      icon: 'view',
      available: true,
      details: 'Vista a√©rea de Santiago',
    },
  ];
} catch (error) {
  // Fallback si no se puede cargar el archivo
  facilities = [
    {
      name: 'Recepci√≥n',
      description:
        '√Årea de espera de clase e hidrataci√≥n. Espacio c√≥modo para esperar tu clase y hidratarte antes o despu√©s del entrenamiento.',
      icon: 'lobby',
      available: true,
      details: 'Ambiente acogedor con vista panor√°mica',
    },
    {
      name: 'Sala Principal Acondicionada',
      description:
        'Sala equipada para la pr√°ctica de pilates con m√°quinas Reformer. Ambiente climatizado con vista a√©rea, equipada con m√°quinas de √∫ltima generaci√≥n.',
      icon: 'gym',
      available: true,
      details: 'M√°quinas Reformer profesionales',
    },
    {
      name: 'Sala Complementaria',
      description:
        'Espacio para sillas multifuncionales y barriles correctores. Sala adicional para ejercicios espec√≠ficos con equipamiento especializado.',
      icon: 'equipment',
      available: true,
      details: 'Sillas y barriles correctores',
    },
    {
      name: 'Ba√±o',
      description:
        'Instalaciones limpias y c√≥modas. Ba√±o equipado para el cambio y aseo personal.',
      icon: 'restroom',
      available: true,
      details: 'Instalaciones modernas y limpias',
    },
    {
      name: 'Bicicletero',
      description:
        'Estacionamiento gratuito para bicicletas en subterr√°neo -2. Acceso seguro, debes traer tu propio candado.',
      icon: 'bike',
      available: true,
      details: 'Gratuito - Trae tu candado',
    },
    {
      name: 'Estacionamiento',
      description:
        'Estacionamientos pagados disponibles en el edificio. Opci√≥n c√≥moda y segura, tambi√©n hay estacionamientos gratuitos en calles cercanas.',
      icon: 'parking',
      available: true,
      details: 'Pagado en edificio, gratuito en calles',
    },
    {
      name: 'Vista Panor√°mica',
      description:
        'Hermosa vista a√©rea de la ciudad desde nuestras salas. Ambiente inspirador que complementa tu experiencia de bienestar.',
      icon: 'view',
      available: true,
      details: 'Vista a√©rea de Santiago',
    },
  ];
}

const iconMap = {
  lobby: 'üè¢',
  gym: 'üèãÔ∏è',
  equipment: '‚öôÔ∏è',
  restroom: 'üöΩ',
  bike: 'üö≤',
  parking: 'üÖøÔ∏è',
  view: 'üåÜ',
};
---

<section
  class="py-12 bg-[var(--cream)]"
  role="region"
  aria-labelledby="facilities-title"
>
  <div class="container mx-auto px-4 max-w-4xl">
    <!-- Header de la secci√≥n -->
    <div class="text-center mb-12">
      <h2
        id="facilities-title"
        class="text-3xl font-bold mb-4 text-[var(--deep-coral)]"
      >
        Nuestro Espacio
      </h2>
      <p class="text-lg text-[var(--charcoal-gray)] max-w-2xl mx-auto">
        Instalaciones dise√±adas pensando en tu comodidad y bienestar, con una
        hermosa vista a√©rea de la ciudad
      </p>
    </div>

    <!-- Descripci√≥n general -->
    <div class="bg-[var(--white)] rounded-lg p-6 mb-8 text-center shadow-sm">
      <div class="flex items-center justify-center gap-3 mb-4">
        <span class="text-3xl">üåÜ</span>
        <h3 class="text-xl font-bold text-[var(--coral-primary)]">
          Ambiente Inspirador
        </h3>
      </div>
      <p class="text-[var(--charcoal-gray)] leading-relaxed">
        Nuestras salas tienen una linda vista a√©rea de la ciudad, creando un
        ambiente inspirador para tu pr√°ctica de Pilates. Tenemos a disposici√≥n
        de nuestros clientes:
      </p>
    </div>

    <!-- Accordion de facilities -->
    <div class="accordion-group space-y-4">
      {
        facilities.map((facility, index) => (
          <details class="facility-accordion bg-[var(--white)] rounded-lg shadow-md overflow-hidden group">
            <summary class="p-6 font-semibold cursor-pointer flex items-center justify-between hover:bg-[var(--rose-pale)] transition-colors duration-200">
              <div class="flex items-center gap-4">
                <div class="w-12 h-12 bg-[var(--warm-gold)] rounded-full flex items-center justify-center text-xl">
                  {iconMap[facility.icon] || 'üìç'}
                </div>
                <div class="text-left">
                  <h4 class="text-lg font-bold text-[var(--deep-coral)]">
                    {facility.name}
                  </h4>
                  <p class="text-sm text-[var(--charcoal-gray)] opacity-75">
                    {facility.details}
                  </p>
                </div>
              </div>
              <div class="flex items-center gap-3">
                {facility.available && (
                  <span class="bg-[var(--sage-green)] text-white px-2 py-1 rounded-full text-xs font-medium">
                    ‚úì Disponible
                  </span>
                )}
                <svg
                  class="w-5 h-5 text-[var(--coral-primary)] transform transition-transform group-open:rotate-180"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M19 9l-7 7-7-7"
                  />
                </svg>
              </div>
            </summary>

            <div class="accordion-content px-6 pb-6">
              <div class="pt-4 border-t border-[var(--warm-gold)] border-opacity-20">
                <p class="text-[var(--charcoal-gray)] leading-relaxed mb-4">
                  {facility.description}
                </p>

                {/* Caracter√≠sticas espec√≠ficas seg√∫n el tipo */}
                {facility.icon === 'gym' && (
                  <div class="grid grid-cols-2 gap-3 mt-4">
                    <div class="flex items-center gap-2 text-sm text-[var(--trust-blue)]">
                      <span>‚ùÑÔ∏è</span>
                      <span>Climatizado</span>
                    </div>
                    <div class="flex items-center gap-2 text-sm text-[var(--trust-blue)]">
                      <span>üåü</span>
                      <span>Equipos modernos</span>
                    </div>
                  </div>
                )}

                {facility.icon === 'parking' && (
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mt-4">
                    <div class="p-3 bg-[var(--cream)] rounded-lg">
                      <h5 class="font-medium text-[var(--deep-coral)] mb-1">
                        Edificio
                      </h5>
                      <p class="text-xs text-[var(--charcoal-gray)]">
                        Estacionamiento pagado y seguro
                      </p>
                    </div>
                    <div class="p-3 bg-[var(--cream)] rounded-lg">
                      <h5 class="font-medium text-[var(--sage-green)] mb-1">
                        Calles
                      </h5>
                      <p class="text-xs text-[var(--charcoal-gray)]">
                        Opciones gratuitas cercanas
                      </p>
                    </div>
                  </div>
                )}

                {facility.icon === 'bike' && (
                  <div class="mt-4 p-3 bg-[var(--sage-green)] bg-opacity-10 rounded-lg border-l-4 border-[var(--sage-green)]">
                    <div class="flex items-center gap-2">
                      <span class="text-lg">üîí</span>
                      <p class="text-sm text-[var(--charcoal-gray)]">
                        <strong>Recuerda:</strong> Traer tu propio candado para
                        mayor seguridad
                      </p>
                    </div>
                  </div>
                )}

                {facility.icon === 'view' && (
                  <div class="mt-4 flex items-center justify-center p-4 bg-gradient-to-r from-[var(--cream)] to-[var(--rose-pale)] rounded-lg">
                    <div class="text-center">
                      <span class="text-4xl mb-2 block">üèôÔ∏è</span>
                      <p class="text-sm text-[var(--charcoal-gray)]">
                        Vista panor√°mica de Santiago
                      </p>
                    </div>
                  </div>
                )}
              </div>
            </div>
          </details>
        ))
      }
    </div>

    <!-- Resumen visual -->
    <div
      class="mt-12 bg-gradient-to-r from-[var(--white)] to-[var(--rose-pale)] rounded-lg p-6"
    >
      <h4 class="text-lg font-bold text-center mb-6 text-[var(--deep-coral)]">
        üè¢ Resumen de Instalaciones
      </h4>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
        {
          facilities.slice(0, 4).map(facility => (
            <div class="text-center p-3 bg-[var(--white)] rounded-lg shadow-sm">
              <div class="text-2xl mb-2">{iconMap[facility.icon]}</div>
              <div class="text-sm font-medium text-[var(--deep-coral)]">
                {facility.name}
              </div>
              <div class="text-xs text-[var(--sage-green)] mt-1">
                ‚úì Disponible
              </div>
            </div>
          ))
        }
      </div>
    </div>
  </div>
</section>

<style>
  /* Estilos para el accordion nativo */
  .facility-accordion summary::-webkit-details-marker {
    display: none;
  }

  .facility-accordion summary::-moz-list-bullet {
    list-style-type: none;
  }

  .facility-accordion[open] summary {
    background-color: var(--rose-pale);
  }

  .facility-accordion[open] summary svg {
    transform: rotate(180deg);
  }

  /* Animaci√≥n para el contenido del accordion */
  .accordion-content {
    animation: slideDown 0.3s ease-out;
  }

  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Hover effects */
  .facility-accordion:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(238, 126, 112, 0.1);
    transition:
      transform 0.2s ease,
      box-shadow 0.2s ease;
  }
</style>

<script>
  // Agregar funcionalidad adicional si es necesario
  document.addEventListener('DOMContentLoaded', () => {
    const accordions = document.querySelectorAll('.facility-accordion');

    accordions.forEach(accordion => {
      const summary = accordion.querySelector('summary');

      summary?.addEventListener('click', e => {
        // Cerrar otros accordions si se desea comportamiento exclusivo
        // accordions.forEach(other => {
        //   if (other !== accordion && other.hasAttribute('open')) {
        //     other.removeAttribute('open');
        //   }
        // });
      });
    });
  });
</script>
